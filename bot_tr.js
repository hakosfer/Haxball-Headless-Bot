!function(a){let o=a.room=HBInit({roomName:"👽 Haxball Odası",public:!0,maxPlayers:12,noPlayer:!0});o.setTeamColors(1,60,16777215,[11730944,7208960,3866624]),o.setTeamColors(2,60,16777215,[1079446,809328,606546]),o.setTeamsLock(!0),o.setScoreLimit(3),o.setTimeLimit(5),o.setDefaultStadium("Easy"),o.startGame();let d=a.Bot={config:{adminPass:"aDm123",mapsUrl:""},pa:[],po:{},data:{mode:4,popLimit:0,stats:!0,msg:"",recent:[],nameBL:[],connBL:[],maps:[]}},f=a.Lib={t:null,balance:()=>{var m=d.data.mode;if(-1!==m){let a=[[],[],[],[],[]],e,t=d.pa,n,l,s,i;for(e=t.length-1;0<=e;e--)n=t[e],l=n.pref,l.afk||(0===l.team?a[n.team].push(n.id):(a[Math.abs(l.team)+2].push(n.id),l.team<0&&(l.team=0)));for(t=a[0],e=t.length-1;0<e;e--)l=Math.floor(Math.random()*(e+1)),n=t[e],t[e]=t[l],t[l]=n;for(e=t.length-1;0<=e&&(s=a[1].length+a[3].length,i=a[2].length+a[4].length,!(0<m&&s>=m&&i>=m));e--)l=s-i,n=0===l?1+Math.floor(2*Math.random()):0<l?2:1,a[n].push(t[e]),t.splice(e,1);if(0===m){if(l=a[1].length+a[3].length-a[2].length-a[4].length,l<-1||1<l)for(i=l<0?2:1,t=a[i],l=Math.floor(Math.abs(l)/2),e=t.length-1;0<=e&&(n=t[e],a[3-i].push(n),t.splice(e,1),l--,0!==l);e--);}else for(e=1;e<3;e++)if(t=a[e],n=t.length+a[e+2].length,n>m)for(n-=m,l=t.length-1;0<=l&&(a[0].push(t[l]),t.splice(l,1),n--,0!==n);l--);for(e=0;e<5;e++)for(n=a[e],l=n.length-1;0<=l;l--)o.setPlayerTeam(n[l],e<3?e:e-2)}},stats:{vict:[0,0],kc:[0,0,0,0,0,0,0],kl:[0,0,0,0,0,0,0],reset:()=>{let a=f.stats;a.kc=[0,0,0,0,0,0],a.kl=[0,0,0,0,0,0]},onKick:a=>{let e=f.stats,t=e.kl,n=e.kc;e.kl=n,e.kc=[a.id,a.team,Date.now(),a.position.x,t[0],t[1],t[2]]},onGoal:a=>{let e=f.stats,t="⚽ Gol!",n=d.po,l,s,i=!1;return l=e.kc,l[1]===a?(i=!0,s=n[l[0]]):l[5]===a&&500<l[2]-l[6]&&(i=!0,s=n[l[4]]),i||(s=n[l[0]]),s&&(t+=" "+s.name+" (",i?(t+="mesafe: "+Math.ceil(Math.abs(700*Math.sign(1.5-a)-l[3])/14)+"m",s.log.stats[2]++,l[5]===a&&(s=null,l[4]!==l[0]?s=n[l[4]]:(l=e.kl,l[5]===a&&l[4]!==l[0]&&(s=n[l[4]])),s&&(t+=", asist: "+s.name,s.log.stats[3]++))):t+="kendi kalesine",t+=")"),f.say(t)},victory:a=>{o.stopGame();let e=d.data.mode;if(-1===e)return o.startGame();let t=d.pa,n,l,s,i=f.stats.vict;for(i[a-1]++,i[2-a]=0,f.say("🏆 "+(1===a?"Kırmızı":"Mavi")+" takım kazandı. Tebrikler! Kırmızı "+i[0]+":"+i[1]+" Mavi"),(2<i[0]||2<i[1])&&(e=-2,i[0]=0,i[1]=0),i=d.data.stats,n=t.length-1;0<=n;n--)l=t[n],s=l.pref,s.afk||(i&&(l.log.stats[0]++,l.team===a&&l.log.stats[1]++),-2===e?(s.team=0===l.team?a-3:s.team,l.team=0,o.setPlayerTeam(l.id,0)):0===e||l.team===3-a?(l.team=0,o.setPlayerTeam(l.id,0)):0===l.team&&(s.team=a-3));f.balance(),o.startGame()}},fetchMaps:()=>{if(!(d.config.mapsUrl.length<1)){let e=d.data;fetch(d.config.mapsUrl).then(function(a){return a.ok?a.json():Promise.reject({status:a.status,statusText:a.statusText})}).then(function(a){e.maps=a}).catch(a=>{console.log(a)})}},setPW:(a,e=!1)=>{a=!a||a.length<1?null:-1===a?Math.round(1e9*Math.random()).toString(16):a;o.setPassword(a),e&&f.msgAdmins("şifre"+(null===a?" temizlendi":": "+a))},nameToPlayer:(a=null)=>{if(null===a||a.length<1)return null;if("#"===a[0])return d.po[parseInt(a.substring(1))];a=a.toLowerCase();let e=d.pa,t,n,l;for(t=e.length-1;0<=t;t--)if(n=e[t],l=n.name.toLowerCase(),l===a)return n;for(t=e.length-1;0<=t;t--)if(n=e[t],l=n.name.toLowerCase(),l.includes(a))return n;return null},mix:a=>{let e,t,n=d.pa;for(e=n.length-1;0<=e;e--)t=n[e],o.setPlayerTeam(t.id,0),t.team=0;f.balance(),a&&a()},mute:(a,e,t=null,n=!0)=>{a.log.mu=Date.now()+6e4*e,n&&f.say("🔕 "+a.name+" "+(0<e?e+" dakika susturuldu"+(t?" ("+t+")":""):"artık konuşabilir"))},say:(a,e)=>{o.sendAnnouncement(a,e,e?1686504:8513796)},msgAdmins:(a,e=1)=>{let t,n,l=d.pa;for(t=l.length-1;0<=t;t--)n=l[t],n.admin>=e&&o.sendAnnouncement(a,n.id,16768768)},ch:{help:{f:(t,n)=>{let l=f,s=l.ch,i;if(n.length)n[0]in s&&(i=s[n[0]],"h"in i&&i.h&&i.a<=t.admin&&l.say(i.h,t.id));else{let a=[],e=Object.keys(s);for(n=0;n<e.length;n++)i=s[e[n]],i.a<=t.admin&&a.push(e[n]);a.length&&l.say("komutlar: "+a.join(", "),t.id),l.say("detaylı bilgi: .help [cmd] veya https://github.com/uzayyli/Haxball-Headless-Bot",t.id)}},h:null,a:0,c:10},rank:{f:(t,n)=>{let l=n.length<1?t:f.nameToPlayer(n[0]);if(l){if(2===n.length&&0<t.admin&&"reset"===n[1])return l.log.stats=[0,0,0,0],f.msgAdmins(l.name+" istatistikleri sıfırlandı ("+t.name+")");let a=l.log.stats,e=f.say;if(a[0]<1)return e("Kayıtlı maç yok",t.id);e(l.name+": "+a[0]+" maçta "+a[2]+" gol, "+a[3]+" asist, %"+Math.ceil(a[1]/a[0]*100)+" kazanma oranı",t.id),e("Maç başına "+(a[2]/a[0]).toFixed(1)+" gol, "+(a[3]/a[0]).toFixed(1)+" asist",t.id)}},h:"rank ([player]) (reset)",a:0,c:20},afk:{f:(t,n)=>{if(!(n.length&&t.admin<1)){let a=f,e=0===n.length?t:a.nameToPlayer(n[0]);e&&((t=e.pref).afk=!t.afk,a.say(e.name+" AFK"+(t.afk?"":" değil")+"."),t.team=0,t.afk&&o.setPlayerTeam(e.id,0),a.balance())}},h:"afk ([player])",a:0,c:30},admin:{f:(a,e)=>{let t=a,n=2,l=null;if(e[0]!==d.config.adminPass){if(a.admin<1)return;1<a.admin&&(t=f.nameToPlayer(e[0]),n=parseInt(e[1]),(isNaN(n)||n<0)&&(n=0),l=2<e.length)}null===l&&(l=1<e.length),f.msgAdmins(t.name+" "+(l?"gizli ":"")+"admin "+(0<n?"L"+n+" ":"değil ")+"("+a.name+")"),t.admin=n,o.setPlayerAdmin(t.id,0<n&&!l)},h:"admin [password] (hidden) or admin [player] [level] (hidden)",a:0,c:20},mute:{f:(a,e)=>{let t=e[0].toLowerCase(),n=Math.min(parseFloat(e[1]),10),l,s=f.mute;if((isNaN(n)||n<0)&&(n=0),"all"===t){let a,e=d.pa;for(a=e.length-1;0<=a;a--)l=e[a],l.a||s(l,n,null,!1);f.say("🔕 herkes "+(0<n?n+" dakika susturuldu":"konuşabilir"))}else l=f.nameToPlayer(t),l.a||s(l,n,"admin")},h:"mute [player]/all [minutes]",a:2},avatar:{f:(a,e)=>{let t=e[0],n=e[1][0],l,s,i;if("all"===t)s=d.pa;else{if(s=f.nameToPlayer(t),!s)return;s=[s]}for(t=s.length,l="c"===n?null:"d"===n?"🎃":e[1],i=t-1;0<=i;i--)o.setPlayerAvatar(s[i].id,l);1===t&&(s[0].log.av=l)},h:"avatar [player]/all clear/default/[av]",a:2},game:{f:(a,e)=>{let t=f.mix,n=a.name;switch(e[0]){case"mix":t(),n+=" takımları kardı";break;case"remix":o.stopGame(),t(o.startGame),n+=" takımları kardı";break;case"restart":o.stopGame(),o.startGame(),n+=" oyunu yeniden başlattı";break;default:n=null}n&&f.say(n)},h:"game mix/remix/restart ([value])",a:1},mode:{f:(a,e)=>{let t=e[0][0].toLowerCase();t="m"===t?-1:"x"===t?0:parseInt(e[0]),t=isNaN(t)?0:t<0?-1:t,d.data.mode=t,f.balance(),f.msgAdmins("Oyun modu: "+(-1===t?"manuel":0===t?"herkes oyunda":t+"v"+t)+" ("+a.name+")")},h:"mode manual/ffa/1v1/2v2/..",a:2},say:{f:(a,e)=>{f.say(e.join(" "))},h:null,a:1},v:{f:(a,e)=>{f.say("v5.4.3")},h:null,a:0,c:20},m:{f:(a,e)=>{let t=d.data;e.length&&(t.msg=e.join(" ")),f.say(t.msg)},h:"m ([msg])",a:1},pm:{f:(a,e)=>{var t=e.slice(1).join(" "),e=f.nameToPlayer(e[0]);f.say("(PM) "+a.name+": "+t,e.id),f.say("(PM to "+e.name+"): "+t,a.id)},h:"pm [player] [msg]",a:2},blacklist:{f:(a,e)=>{let t=e[0],n=e[1],l=d.data,s;switch(t){case"recent":for(f.say("recent players (oldest first):",a.id),l=l.recent,n=0;n<l.length;n++)t=l[n],f.say('"'+t.name+'": '+t.conn,a.id);s=null;break;case"ip":t=l.connBL,-1===t.indexOf(n)&&t.push(n);var i=l.recent.find(a=>a.conn===n);s=(i?i.name:n)+" ip-blacklistlendi";break;case"name":l=l.nameBL,-1===l.indexOf(n)&&l.push(n),s=n+" name-blacklistlendi";break;case"clear":l.nameBL=[],l.connBL=[],s="blacklistler temizlendi";break;case"get":f.msgAdmins("Blacklists:"),f.msgAdmins("Names: "+l.nameBL.join(", ")),s="IPs:"+l.connBL.join(", ");break;default:f.say("pls "+f.ch.blacklist.h,a.id),s=null}s&&f.msgAdmins(s)},h:"blacklist clear/get/recent/ip/name ([conn/ExactName])",a:2},team:{f:(a,e)=>{let t=e[0],n=e[1][0],l,s,i,m=f,r=!1;if("-"===n&&(r=!0,e[1]=e[1].substring(1),n=e[1][0]),s="r"===n?1:"b"===n?2:"n"===n?0:parseInt(e[1]),(isNaN(s)||s<0||2<s)&&(s=0),"all"===t)n=d.pa,i="Herkes";else{if(n=m.nameToPlayer(t),!n)return;i=n.name,n=[n]}if(m.say(i+" "+(0===s?"takım tercihini sildi":(1===s?"kırmızı":"mavi")+" takıma "+(r?"geçti":"atandı"))),r)for(l=n.length-1;0<=l;l--)o.setPlayerTeam(n[l].id,s),n[l].team=s;else{for(l=n.length-1;0<=l;l--)n[l].pref.team=s;m.balance()}},h:"team [player]/all [0/1/2]",a:2},kick:{f:(a,e)=>{var t=f.nameToPlayer(e[0]),e=1<e.length&&0<e[1].length?e.slice(1).join(" "):null;o.kickPlayer(t.id,e,!1)},h:null,a:2},ban:{f:(a,e)=>{var t=f.nameToPlayer(e[0]),e=1<e.length&&0<e[1].length?e.slice(1).join(" "):null;o.kickPlayer(t.id,e,!0)},h:null,a:2},setpw:{f:(a,e)=>{let t=e[0].substring(0,4);t="rand"===t?-1:"null"===t?null:e[0],f.setPW(t,!0)},h:"setpw [pAsS]/rand/null]",a:2},maps:{f:(a,e)=>{e.length&&1<a.admin&&"fetch"===e[0]?(f.fetchMaps(),f.msgAdmins("haritalar tekrar yüklendi")):f.say(Object.keys(d.data.maps).join(", "),a.id)},h:"maps (fetch)",a:1},load:{f:(l,s)=>{if(s.length){let a,e=s[0].toLowerCase(),t=null,n=d.data.maps;for(a in n)if(a.toLowerCase()===e){t=a;break}if(!t)for(a in n)if(a.toLowerCase().includes(e)){t=a;break}t?("object"==typeof n[t]&&(n[t]=JSON.stringify(n[t])),o.stopGame(),o.setCustomStadium(n[t]),o.startGame(),f.msgAdmins(l.name+" "+a+" açtı")):f.say("bu harita yok",l.id)}},h:null,a:1},stats:{f:(t,n)=>{if(n.length){let a=n[0].toLowerCase(),e=f.stats;a="on"===a?1:"off"===a?0:parseInt(a),a=isNaN(a)?0:a,a=1===a,f.say(t.name+" istatistikleri "+(a?"açtı":"kapattı")),o.onPlayerBallKick=a?e.onKick:null,o.onTeamGoal=a?e.onGoal:null,o.onPositionsReset=a?e.reset:null,o.stopGame(),o.startGame()}},h:"stats on/off",a:2},poplimit:{f:(a,e)=>{let t=parseInt(e[0]);t=isNaN(t)?0:t,d.data.popLimit=t,f.setPW(t&&d.pa.length>=t?-1:null),f.msgAdmins("oyuncu limiti: "+(0===t?"kapalı":t)+" ("+a.name+")")},h:"poplimit [value]",a:2}}};o.onGameStart=a=>{let e=f;clearTimeout(e.t),d.data.stats&&e.stats.reset()},o.onTeamVictory=a=>{let e=f;e.t=setTimeout(()=>{e.stats.victory(a.red>a.blue?1:2)},3e3)},o.onPlayerTeamChange=(a,e)=>{let t=d.po[a.id];if(e&&t.pref.afk&&0<a.team)return f.say(a.name+" AFK",e.id),o.setPlayerTeam(a.id,0);t.team=a.team},o.onPlayerAdminChange=(e,a)=>{if(a){let a=d.po[e.id];a.admin=e.admin?Math.max(1,a.admin):0}},o.onPlayerJoin=e=>{let a=d.pa,t=e.name.toLowerCase(),n,l=!1;for(n=a.length-1;0<=n;n--)if(a[n].name.toLowerCase()===t)return o.kickPlayer(e.id,"Odada aynı adlı bir oyuncu var.",!1);for(t=d.data,a=t.nameBL,n=a.length-1;0<=n;n--)if(e.name.includes(a[n])){l=!0;break}if(!l)for(a=t.connBL,n=a.length-1;0<=n;n--)if(e.conn===a[n]){l=!0,a.splice(n,1);break}if(l)return o.kickPlayer(e.id,"blacklist",!0);l=Date.now(),t=d.data.recent,n=t.findIndex(a=>a.conn===e.conn),a={id:e.id,name:e.name,team:0,admin:0,pref:{afk:!1,team:0},log:{conn:e.conn,mu:-(l+1e4),lm:l,tc:0,av:null,cc:l,stats:[0,0,0,0]}},-1===n?(l=null,t=a.log):(n=t[n],l=n.name,t=a.log,l===e.name&&(l=null),t.av=n.av,n.mu>-t.mu&&(t.mu=n.mu),t.stats=n.stats),d.pa.push(a),d.po[a.id]=a,t.av&&o.setPlayerAvatar(a.id,t.av),t=f,t.say("Hoş geldin "+a.name+"!"+(l?" (Önceki ad: "+l+")":"")),t.balance(),l=d.data.popLimit,l&&d.pa.length>=l&&t.setPW(-1)},o.onPlayerLeave=l=>{if(l=d.po[l.id]){let a=l.log,e={name:l.name,conn:a.conn,av:a.av,mu:a.mu,cc:a.cc,stats:a.stats},t,n;for(a=d.data.recent,t=a.length-1;0<=t;t--)if(a[t].conn===e.conn){a.splice(t,1);break}for(a.push(e),20<a.length&&a.splice(0,1),n=f,a=d.pa,t=a.length-1;0<=t;t--)if(a[t].id===l.id){a.splice(t,1);break}delete d.po[l.id],n.balance(),e=d.data.popLimit,e&&a.length<e&&n.setPW(null)}},o.onPlayerChat=(e,t)=>{e=d.po[e.id];let n=f,a,l,s,i=Date.now();if(e.admin<1){if(s=e.log,l=s.mu,l<0&&(-l<i?s.mu=0:15<t.length&&(l=-l)),l>i)return n.say(Math.ceil((l-i)/1e3)+" saniye sonra yazı yazabilirsiniz.",e.id),!1;if(a=i-s.lm,5e3<a)s.tc=0;else if(a<1100&&(s.tc++,2<s.tc))return s.tc=0,n.mute(e,1,"spam"),!1;s.lm=i}if("!"===t[0]||"."===t[0]&&"."!==t[1])try{if(a=t.substring(1).split(" "),l=a[0].toLowerCase(),l=n.ch[l],!l)return!1;if(e.admin<1){if((t=e.log).cc>=i)return n.say("lütfen komutları tekrar kullanmak için biraz bekleyin",e.id),!1;t.cc=i+1e3*(l.c||5)}return l.a>e.admin?(n.say("bu komutu kullanmak için admin level "+l.a+" olmalısınız",e.id),!1):!!l.f(e,a.slice(1))}catch(a){return 0<e.admin&&(n.msgAdmins(e.name+", bir sorun oldu. mesaj: "+t),n.msgAdmins(a.message+" @"+a.lineNumber)),!1}},f.fetchMaps(),d.data.stats&&(a=f.stats,o.onPlayerBallKick=a.onKick,o.onTeamGoal=a.onGoal,o.onPositionsReset=a.reset)}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);