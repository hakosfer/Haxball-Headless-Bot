!function(a){let o=a.room=HBInit({roomName:"👽 Haxball Odası",maxPlayers:12,public:!0,noPlayer:!0}),d=a.Bot={config:{adminPass:"admPs",mapsUrl:""},pa:[],po:{},data:{mode:4,popLimit:0,msg:"",recent:[],nameBL:[],connBL:[],maps:[]},stats:{kc:{id:1,team:1},kl:{id:1,team:1},vs:[0,0],onKick:a=>{let e=d.stats,t=Date.now();t-e.t<250||(e.kl=e.kc,e.kc={id:a.id,team:a.team,x:a.position.x},e.t=t)},onGoal:a=>{let e=d.stats,t="⚽ Gol",n=d.po,l,i;l=e.kc,i=n[l.id],i&&(t+="! "+n[l.id].name+" (",l.team===a?(e=e.kl,t+="mesafe: "+Math.ceil(Math.abs(700*Math.sign(1.5-a)-l.x)/14)+"m",e.team===a&&l.id!==e.id&&(e=n[e.id],e&&(t+=", asist: "+n[e.id].name))):t+="kendi kalesine",t+=")"),c.say(t)}}};o.setTeamColors(1,60,16777215,[11730944,7208960,3866624]),o.setTeamColors(2,60,16777215,[1079446,809328,606546]),o.setTeamsLock(!0),o.setScoreLimit(3),o.setTimeLimit(5),o.setDefaultStadium("Easy"),o.startGame();let c={t:null,victory:a=>{o.stopGame();let e=d.data.mode;if(-1===e)return o.startGame();let t=d.pa,n,l,i,s=d.stats.vs;for(s[a-1]++,s[2-a]=0,c.say("🏆 "+(1===a?"Kırmızı":"Mavi")+" takım kazandı. Tebrikler! Kırmızı "+s[0]+":"+s[1]+" Mavi"),(2<s[0]||2<s[1])&&(e=-2,s[0]=0,s[1]=0),n=t.length-1;0<=n;n--)l=t[n],i=l.pref,i.afk||(-2===e?(i.team=0===l.team?a-3:i.team,l.team=0,o.setPlayerTeam(l.id,0)):0===e||l.team===3-a?(l.team=0,o.setPlayerTeam(l.id,0)):0===l.team&&(i.team=a-3));c.balance(),o.startGame()},balance:()=>{var m=d.data.mode;if(-1!==m){let a=[[],[],[],[],[]],e,t=d.pa,n,l,i,s;for(e=t.length-1;0<=e;e--)n=t[e],l=n.pref,l.afk||(0===l.team?a[n.team].push(n.id):(a[Math.abs(l.team)+2].push(n.id),l.team<0&&(l.team=0)));for(t=a[0],e=t.length-1;0<e;e--)l=Math.floor(Math.random()*(e+1)),n=t[e],t[e]=t[l],t[l]=n;for(e=t.length-1;0<=e&&(i=a[1].length+a[3].length,s=a[2].length+a[4].length,!(0<m&&i>=m&&s>=m));e--)l=i-s,n=0===l?1+Math.floor(2*Math.random()):0<l?2:1,a[n].push(t[e]),t.splice(e,1);if(0===m){if(l=a[1].length+a[3].length-a[2].length-a[4].length,l<-1||1<l)for(s=l<0?2:1,t=a[s],l=Math.floor(Math.abs(l)/2),e=t.length-1;0<=e&&(n=t[e],a[3-s].push(n),t.splice(e,1),l--,0!==l);e--);}else for(e=1;e<3;e++)if(t=a[e],n=t.length+a[e+2].length,n>m)for(n-=m,l=t.length-1;0<=l&&(a[0].push(t[l]),t.splice(l,1),n--,0!==n);l--);for(e=0;e<5;e++)for(n=a[e],l=n.length-1;0<=l;l--)o.setPlayerTeam(n[l],e<3?e:e-2)}},fetchMaps:()=>{if(!(d.config.mapsUrl.length<1)){let e=d.data;fetch(d.config.mapsUrl).then(function(a){return a.ok?a.json():Promise.reject({status:a.status,statusText:a.statusText})}).then(function(a){e.maps=a}).catch(a=>{console.log(a)})}},setPW:(a,e=!1)=>{a=!a||a.length<1?null:-1===a?Math.round(1e9*Math.random()).toString(16):a,o.setPassword(a),e&&c.msgAdmins("şifre"+(null===a?" temizlendi":": "+a))},nameToPlayer:(a=null)=>{if(null===a||a.length<1)return null;if("#"===a[0])return d.po[parseInt(a.substring(1))];a=a.toLowerCase();let e=d.pa,t,n,l;for(t=e.length-1;0<=t;t--)if(n=e[t],l=n.name.toLowerCase(),l===a)return n;for(t=e.length-1;0<=t;t--)if(n=e[t],l=n.name.toLowerCase(),l.includes(a))return n;return null},mix:a=>{let e,t,n=d.pa;for(e=n.length-1;0<=e;e--)t=n[e],o.setPlayerTeam(t.id,0),t.team=0;c.balance(),a&&a()},mute:(a,e,t=null,n=!0)=>{a.log.mu=Date.now()+6e4*e,n&&c.say("🔕 "+a.name+" "+(0<e?e+" dakika susturuldu"+(t?" ("+t+")":""):"artık konuşabilir"))},say:(a,e)=>{o.sendAnnouncement(a,e,e?11393254:8513796)},msgAdmins:(a,e=1)=>{let t,n,l=d.pa;for(t=l.length-1;0<=t;t--)n=l[t],n.admin>=e&&o.sendAnnouncement(a,n.id,16768768)},ch:{help:{f:(a,e)=>{let t=c,n=t.ch,l;e.length?e[0]in n&&(l=n[e[0]],"h"in l&&l.h&&t.say(l.h,a.id)):(t.say("komutlar: "+Object.keys(n).join(", "),a.id),t.say("detaylı bilgi: .help [cmd]",a.id))},h:null,a:1},admin:{f:(a,e)=>{a.admin<=0&&e[0]!==d.config.adminPass||(a.admin=2,1<e.length?(o.setPlayerAdmin(a.id,!1),c.msgAdmins(a.name+" gizli admin.")):o.setPlayerAdmin(a.id,!0))},h:"admin [password] (hidden)",a:0},setadminlevel:{f:(a,e)=>{let t=c.nameToPlayer(e[0]),n=Math.min(2,Math.abs(parseInt(e[1])));t.admin=n,o.setPlayerAdmin(t.id,0<n&&e.length<3),c.msgAdmins(t.name+" "+(0<n&&2<e.length?"gizli ":"")+"admin"+(0===n?" değil":"")+" ("+a.name+")")},h:"setadminlevel [player] [level] (hidden)",a:2},say:{f:(a,e)=>{c.say(e.join(" "))},h:null,a:1},v:{f:(a,e)=>{c.say("v5.4.1")},h:null,a:1},m:{f:(a,e)=>{let t=d.data;e.length&&(t.msg=e.join(" ")),c.say(t.msg)},h:"m ([msg])",a:1},pm:{f:(a,e)=>{var t=e.slice(1).join(" "),e=c.nameToPlayer(e[0]);c.say("(PM) "+a.name+": "+t,e.id),c.say("(PM to "+e.name+"): "+t,a.id)},h:"pm [player] [message]",a:2},mute:{f:(a,e)=>{let t=e[0].toLowerCase(),n=Math.min(parseFloat(e[1]),10),l,i=c.mute;if((isNaN(n)||n<0)&&(n=0),"all"===t){let a,e=d.pa;for(a=e.length-1;0<=a;a--)l=e[a],l.a||i(l,n,null,!1);c.say("🔕 herkes "+(0<n?n+" dakika susturuldu":"konuşabilir"))}else l=c.nameToPlayer(t),l.a||i(l,n,"admin")},h:"mute [player/all] [mins]",a:2},team:{f:(a,e)=>{let t=e[0],n=e[1][0],l,i,s,m=c,r=!1;if("-"===n&&(r=!0,e[1]=e[1].substring(1),n=e[1][0]),i="r"===n?1:"b"===n?2:"n"===n?0:parseInt(e[1]),(isNaN(i)||i<0||2<i)&&(i=0),"all"===t)n=d.pa,s="Herkes";else{if(n=m.nameToPlayer(t),!n)return;s=n.name,n=[n]}if(m.say(s+" "+(0===i?"takım tercihini sildi":(1===i?"kırmızı":"mavi")+" takıma "+(r?"geçti":"atandı"))),r)for(l=n.length-1;0<=l;l--)o.setPlayerTeam(n[l].id,i),n[l].team=i;else{for(l=n.length-1;0<=l;l--)n[l].pref.team=i;m.balance()}},h:"team [player/all] [0/1/2]",a:2},afk:{f:(a,e)=>{let t=c,n=0===e.length?a:t.nameToPlayer(e[0]);n&&((a=n.pref).afk=!a.afk,t.say(n.name+" AFK"+(a.afk?"":" değil")+"."),a.team=0,a.afk&&o.setPlayerTeam(n.id,0),t.balance())},h:null,a:1},blacklist:{f:(a,e)=>{let t=e[0],n=e[1],l=d.data,i;switch(t){case"recent":for(c.say("recent players (oldest first):",a.id),l=l.recent,n=0;n<l.length;n++)t=l[n],c.say('"'+t.name+'": '+t.conn,a.id);i=null;break;case"ip":t=l.connBL,-1===t.indexOf(n)&&t.push(n);var s=l.recent.find(a=>a.conn===n);i=(s?s.name:n)+" ip-blacklistlendi";break;case"name":l=l.nameBL,-1===l.indexOf(n)&&l.push(n),i=n+" name-blacklistlendi";break;case"clear":l.nameBL=[],l.connBL=[],i="blacklistler temizlendi";break;case"get":c.msgAdmins("Blacklists:"),c.msgAdmins("Names: "+l.nameBL.join(", ")),i="IPs:"+l.connBL.join(", ");break;default:c.say("pls "+c.ch.blacklist.h,a.id),i=null}i&&c.msgAdmins(i)},h:"blacklist [clear/get/recent/ip/name] ([conn/ExactName])",a:2},kick:{f:(a,e)=>{var t=c.nameToPlayer(e[0]),e=1<e.length&&0<e[1].length?e.slice(1).join(" "):null;o.kickPlayer(t.id,e,!1)},h:null,a:2},ban:{f:(a,e)=>{var t=c.nameToPlayer(e[0]),e=1<e.length&&0<e[1].length?e.slice(1).join(" "):null;o.kickPlayer(t.id,e,!0)},h:null,a:2},game:{f:(a,e)=>{let t=c.mix,n=a.name;switch(e[0]){case"mix":t(),n+=" takımları kardı";break;case"remix":o.stopGame(),t(o.startGame),n+=" takımları kardı";break;case"restart":o.stopGame(),o.startGame(),n+=" oyunu yeniden başlattı";break;case"mode":t=e[1][0].toLowerCase(),t="m"===t?-1:"f"===t?0:parseInt(e[1]),t=isNaN(t)?0:t<0?-1:t,d.data.mode=t,c.balance(),n+=", oyun modu: "+(-1===t?"manuel":0===t?"herkes oyunda":t+"v"+t);break;case"poplimit":t=parseInt(e[1]),t=isNaN(t)?0:Math.abs(t),d.data.popLimit=t,c.setPW(t&&d.pa.length>=t?-1:null),n+=" oyuncu limitini "+(0===t?"kaldırdı":t+" yaptı");break;case"commentator":t=e[1].toLowerCase(),t="on"===t?1:"off"===t?0:parseInt(t),t=isNaN(t)?0:t,n+=" spikeri "+(1===t?"açtı":"kapattı"),0===t?(o.onPlayerBallKick=null,o.onTeamGoal=null):(t=d.stats,o.onPlayerBallKick=t.onKick,o.onTeamGoal=t.onGoal);break;default:n=null}n&&c.msgAdmins(n)},h:"game mix/remix/restart/mode/commentator/poplimit ([value])",a:2},setpw:{f:(a,e)=>{let t=e[0].substring(0,4);t="rand"===t?-1:"null"===t?null:e[0],c.setPW(t,!0)},h:"setpw [aBc123/rand/null]",a:2},avatar:{f:(a,e)=>{let t=e[0],n=e[1][0],l,i,s;if("all"===t)i=d.pa;else{if(i=c.nameToPlayer(t),!i)return;i=[i]}for(t=i.length,l="c"===n?null:"d"===n?"🎃":e[1],s=t-1;0<=s;s--)o.setPlayerAvatar(i[s].id,l);1===t&&(i[0].log.av=l)},h:"avatar [player/all] clear/default/[av]",a:2},maps:{f:(a,e)=>{e.length&&"fetch"===e[0]?(c.fetchMaps(),c.msgAdmins("haritalar tekrar yüklendi")):c.say(Object.keys(d.data.maps).join(", "),a.id)},h:"maps (fetch)",a:2},load:{f:(l,i)=>{if(i.length){let a,e=i[0].toLowerCase(),t=null,n=d.data.maps;for(a in n)if(a.toLowerCase()===e){t=a;break}if(!t)for(a in n)if(a.toLowerCase().includes(e)){t=a;break}t?("object"==typeof n[t]&&(n[t]=JSON.stringify(n[t])),o.stopGame(),o.setCustomStadium(n[t]),o.startGame(),c.msgAdmins(l.name+" "+a+" açtı")):c.say("bu harita yok",l.id)}},h:null,a:2}}};o.onPlayerTeamChange=a=>{d.po[a.id].team=a.team},o.onPlayerAdminChange=(e,a)=>{if(a){let a=d.po[e.id];a.admin=e.admin?Math.max(1,a.admin):0}},o.onGameStart=a=>{clearTimeout(c.t)},o.onTeamVictory=a=>{let e=c;e.t=setTimeout(()=>{e.victory(a.red>a.blue?1:2)},5e3)},o.onPlayerJoin=e=>{let a=d.pa,t=e.name.toLowerCase(),n,l=!1;for(n=a.length-1;0<=n;n--)if(a[n].name.toLowerCase()===t)return o.kickPlayer(e.id,"Odada aynı adlı bir oyuncu var.",!1);for(t=d.data,a=t.nameBL,n=a.length-1;0<=n;n--)if(e.name.includes(a[n])){l=!0;break}if(!l)for(a=t.connBL,n=a.length-1;0<=n;n--)if(e.conn===a[n]){l=!0,a.splice(n,1);break}if(l)return o.kickPlayer(e.id,"blacklist",!0);let i={},s={};l=Date.now(),t=d.data.recent,n=t.findIndex(a=>a.conn===e.conn),i.id=e.id,i.name=e.name,i.team=0,i.admin=0,s.afk=!1,s.team=0,i.pref=s,s={},s.conn=e.conn,s.mu=-(l+1e4),s.lm=l,s.tc=0,s.av=null,i.log=s,-1===n?l=null:(n=t[n],l=n.name,l===i.name&&(l=null),s.av=n.av,n.mu>-s.mu&&(s.mu=n.mu)),d.pa.push(i),d.po[i.id]=i,s.av&&o.setPlayerAvatar(i.id,s.av),s=c,s.say("Hoş geldin "+i.name+"!"+(l?" (Önceki ad: "+l+")":"")),s.balance(),i=d.data.popLimit,i&&d.pa.length>=i&&s.setPW(-1)},o.onPlayerLeave=l=>{if(l=d.po[l.id]){let a={},e=l.log,t={},n;for(a.name=l.name,a.conn=e.conn,a.av=e.av,a.mu=e.mu,e=d.data.recent,n=e.length-1;0<=n;n--)if(e[n].conn===a.conn){e.splice(n,1);break}for(e.push(a),20<e.length&&e.splice(0,1),t=c,d.po[l.id]=null,e=d.pa,n=e.length-1;0<=n;n--)if(e[n].id===l.id){e.splice(n,1);break}t.balance(),a=d.data.popLimit,a&&e.length<a&&t.setPW(null)}},o.onPlayerChat=(a,e)=>{a=d.po[a.id];let t=c,n,l,i;if(a.admin<1){var s=Date.now();if(i=a.log,l=i.mu,l<0&&(-l<s?i.mu=0:15<e.length&&(l=-l)),l>s)return o.sendAnnouncement(Math.ceil((l-s)/1e3)+" saniye sonra yazı yazabilirsiniz.",a.id),!1;if(n=s-i.lm,5e3<n)i.t=0;else if(n<1100&&(i.tc++,2<i.tc))return i.tc=0,t.mute(a,1,"spam"),!1;i.lm=s}if("."===e[0]&&"."!==e[1])try{return n=e.substring(1).split(" "),l=n[0].toLowerCase(),l=t.ch[l],l.a>a.admin?(t.say("bu komutu kullanma yetkiniz yok",a.id),!1):!!l.f(a,n.slice(1))}catch(n){return 0<a.admin&&(t.msgAdmins(a.name+", bir sorun oldu. mesaj: "+e),t.msgAdmins(n.message+" @"+n.lineNumber)),!1}},c.fetchMaps()}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);